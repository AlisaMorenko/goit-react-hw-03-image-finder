{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Searchbar/Searchbar.js","components/ImageGalleryItem/ImageGalleryItem.js","components/ImageGallery/ImageGallery.js","components/Button/Button.js","components/Modal/Modal.js","components/services/image-finder-api.js","App.js","index.js","components/Searchbar/Searchbar.module.css"],"names":["module","exports","Searchbar","state","searchQuery","handleNameChange","e","setState","currentTarget","value","toLowerCase","handleSubmit","preventDefault","trim","props","onSubmit","toast","error","className","styles","this","SearchForm","type","button","label","input","autoComplete","autoFocus","placeholder","name","onChange","React","Component","ImageGalleryItem","webformatURL","tags","onOpen","onClick","src","alt","image","ImageGallery","hits","map","id","largeImageURL","Button","modalRoot","document","querySelector","Modal","handleKeydown","code","onClose","handleOverlayClick","event","console","log","target","window","addEventListener","removeEventListener","createPortal","Overlay","api","fetchImg","page","fetch","then","response","ok","json","Promise","reject","Error","data","App","status","showModal","selectedImage","handleFormSubmit","resetState","handleClickButton","imgAPI","pic","prevState","scrollTo","top","documentElement","scrollHeight","behavior","openModal","closeModal","prevProps","catch","finally","loading","position","autoClose","color","height","width","message","length","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.f3a76712.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGalleryItem\":\"ImageGalleryItem_ImageGalleryItem__2eXML\",\"image\":\"ImageGalleryItem_image__1SmDv\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Overlay\":\"Modal_Overlay__thuOl\",\"Modal\":\"Modal_Modal__vrHu2\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ImageGallery\":\"ImageGallery_ImageGallery__gm4PA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Button\":\"Button_Button__TkaYE\"};","import React from 'react';\nimport { toast } from 'react-toastify';\nimport styles from './Searchbar.module.css';\n\nclass Searchbar extends React.Component {\n  state = {\n    searchQuery: '',\n  };\n\n  handleNameChange = e => {\n    this.setState({ searchQuery: e.currentTarget.value.toLowerCase() });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n\n    if (this.state.searchQuery.trim() === '') {\n      toast.error('No value for request!');\n      return;\n    }\n\n    this.props.onSubmit(this.state.searchQuery);\n    this.setState({ searchQuery: '' });\n  };\n\n  render() {\n    return (\n      <header className={styles.Searchbar}>\n        <form onSubmit={this.handleSubmit} className={styles.SearchForm}>\n          <button type=\"submit\" className={styles.button}>\n            <span className={styles.label}>Search</span>\n          </button>\n\n          <input\n            className={styles.input}\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            placeholder=\"Search images and photos\"\n            value={this.state.name}\n            onChange={this.handleNameChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport styles from './ImageGalleryItem.module.css';\n\nconst ImageGalleryItem = ({ webformatURL, tags, onOpen }) => (\n  <li className={styles.ImageGalleryItem} onClick={onOpen}>\n    <img src={webformatURL} alt={tags} className={styles.image} />\n  </li>\n);\n\nImageGalleryItem.propTypes = {\n  onOpen: PropTypes.func.isRequired,\n  webformatURL: PropTypes.string.isRequired,\n  tags: PropTypes.string.isRequired,\n};\nexport default ImageGalleryItem;\n","import React from 'react';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nimport styles from './ImageGallery.module.css';\n\nconst ImageGallery = ({ hits, onOpen }) => (\n  <ul className={styles.ImageGallery}>\n    {hits.map(({ id, webformatURL, tags, largeImageURL }) => (\n      <ImageGalleryItem\n        key={id}\n        webformatURL={webformatURL}\n        tags={tags}\n        onOpen={() => onOpen(largeImageURL, tags)}\n      />\n    ))}\n  </ul>\n);\n\nImageGallery.propTypes = {\n  hits: PropTypes.array.isRequired,\n  onOpen: PropTypes.func.isRequired,\n};\nexport default ImageGallery;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport styles from './Button.module.css';\n\nconst Button = ({ onClick }) => (\n  <button type=\"button\" className={styles.Button} onClick={onClick}>\n    Load more\n  </button>\n);\n\nButton.propTypes = {\n  onClick: PropTypes.func.isRequired,\n};\n\nexport default Button;\n","import React from 'react';\nimport { createPortal } from 'react-dom';\nimport styles from './Modal.module.css';\n\nconst modalRoot = document.querySelector('#modal-root');\n\nclass Modal extends React.Component {\n  componentDidMount() {\n    window.addEventListener('keydown', this.handleKeydown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('keydown', this.handleKeydown);\n  }\n\n  handleKeydown = e => {\n    if (e.code === 'Escape') {\n      this.props.onClose();\n    }\n  };\n\n  handleOverlayClick = event => {\n    console.log('currentTarget: ', event.currentTarget);\n    console.log('target: ', event.target);\n    if (event.currentTarget === event.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    const { image } = this.props;\n    return createPortal(\n      <div className={styles.Overlay} onClick={this.handleOverlayClick}>\n        <div className={styles.Modal}>\n          <img src={image.src} alt={image.alt} />\n        </div>\n      </div>,\n      modalRoot,\n    );\n  }\n}\n\nexport default Modal;\n","function fetchImg(searchQuery, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${searchQuery}&page=${page}&key=21789669-964dbbf22655e629fd0e73135&image_type=photo&orientation=horizontal&per_page=12`,\n  )\n    .then(response => {\n      if (response.ok) {\n        return response.json();\n      }\n      return Promise.reject(new Error('Ничего не найдено'));\n    })\n    .then(data => {\n      // page = page + 1;\n      return data.hits;\n    });\n}\nconst api = { fetchImg };\nexport default api;\n","import React from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport Loader from 'react-loader-spinner';\n\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Modal from './components/Modal';\nimport imgAPI from './components/services/image-finder-api';\n\nimport 'react-toastify/dist/ReactToastify.css';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\n\nclass App extends React.Component {\n  state = {\n    searchQuery: '',\n    page: 1,\n    hits: [],\n    error: null,\n    status: 'idle',\n    showModal: false,\n    selectedImage: null,\n  };\n\n  componentDidUpdate(prevProps, prevState) {\n    const { searchQuery, page } = this.state;\n\n    if (prevState.searchQuery !== searchQuery) {\n      this.setState({ status: 'pending' });\n      imgAPI\n        .fetchImg(searchQuery, page)\n        .then(hits =>\n          this.setState({\n            hits,\n            page: this.state.page + 1,\n            status: 'resolved',\n          }),\n        )\n        .catch(error => this.setState({ error, status: 'rejected' }))\n        .finally(() => this.setState({ loading: false }));\n    }\n  }\n\n  handleFormSubmit = searchQuery => {\n    this.resetState();\n    this.setState({ searchQuery });\n  };\n\n  resetState = () => {\n    this.setState({\n      page: 1,\n      hits: [],\n      error: null,\n    });\n  };\n\n  handleClickButton = () => {\n    // this.setState({ status: 'pending' });\n\n    const { searchQuery, page } = this.state;\n    imgAPI\n      .fetchImg(searchQuery, page)\n      .then(pic =>\n        this.setState(prevState => ({\n          hits: [...prevState.hits, ...pic],\n          page: prevState.page + 1,\n          status: 'resolved',\n        })),\n      )\n      .then(() =>\n        window.scrollTo({\n          top: document.documentElement.scrollHeight,\n          behavior: 'smooth',\n        }),\n      );\n  };\n\n  openModal = (src, alt) => {\n    this.setState({\n      showModal: true,\n      selectedImage: { src, alt },\n    });\n  };\n  closeModal = () => this.setState({ showModal: false });\n\n  render() {\n    const { hits, error, status, showModal, selectedImage } = this.state;\n\n    if (status === 'idle') {\n      return (\n        <>\n          <Searchbar onSubmit={this.handleFormSubmit} />;\n          <ToastContainer position=\"top-center\" autoClose={3000} />\n        </>\n      );\n    }\n\n    if (status === 'pending') {\n      return (\n        <>\n          <Searchbar onSubmit={this.handleFormSubmit} />\n          <Loader type=\"ThreeDots\" color=\"#00BFFF\" height={80} width={80} />\n        </>\n      );\n    }\n\n    if (status === 'rejected') {\n      return (\n        <>\n          <h1>{error.message}</h1>;\n        </>\n      );\n    }\n\n    if (status === 'resolved') {\n      return (\n        <>\n          <Searchbar onSubmit={this.handleFormSubmit} />\n          <ImageGallery hits={hits} onOpen={this.openModal} />\n          {showModal && (\n            <Modal image={selectedImage} onClose={this.closeModal} />\n          )}\n          {this.state.hits.length > 0 && (\n            <Button onClick={this.handleClickButton} />\n          )}\n        </>\n      );\n    }\n  }\n}\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport App from './App';\n\nimport styles from './index.css';\nimport 'modern-normalize/modern-normalize.css';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App className={styles.App} />\n  </React.StrictMode>,\n  document.getElementById('root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Searchbar\":\"Searchbar_Searchbar__-U58e\",\"SearchForm\":\"Searchbar_SearchForm__3O6D8\",\"button\":\"Searchbar_button__3Fijj\",\"label\":\"Searchbar_label__q5Ixi\",\"input\":\"Searchbar_input__3NjDk\"};"],"sourceRoot":""}